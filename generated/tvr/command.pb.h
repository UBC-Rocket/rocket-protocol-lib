/* Automatically generated nanopb header */
/* Generated by nanopb-1.0.0-dev */

#ifndef PB_TVR_COMMAND_PB_H_INCLUDED
#define PB_TVR_COMMAND_PB_H_INCLUDED
#include <pb.h>
#include "common.pb.h"

#if PB_PROTO_HEADER_VERSION != 40
#error Regenerate this file with the current version of nanopb generator.
#endif

/* Enum definitions */
typedef enum _tvr_StateCommand_Type {
    tvr_StateCommand_Type_CMD_NONE = 0,
    tvr_StateCommand_Type_CMD_ARM = 1,
    tvr_StateCommand_Type_CMD_LAUNCH = 2,
    tvr_StateCommand_Type_CMD_ABORT = 3,
    tvr_StateCommand_Type_CMD_LAND = 4
} tvr_StateCommand_Type;

/* Struct definitions */
/* High-level state transitions */
typedef struct _tvr_StateCommand {
    tvr_StateCommand_Type type;
} tvr_StateCommand;

/* PID gain tuning (all gains in one message) */
typedef struct _tvr_SetPidGains {
    /* Attitude controller (diagonal of 3x3 gain matrices) */
    bool has_attitude_kp;
    tvr_Vec3 attitude_kp; /* proportional */
    bool has_attitude_kd;
    tvr_Vec3 attitude_kd; /* derivative */
    /* Z position PID */
    float z_kp;
    float z_ki;
    float z_kd;
    float z_integral_limit;
} tvr_SetPidGains;

/* Setpoint / reference commands */
typedef struct _tvr_SetReference {
    float z_ref; /* target height [m] */
    float vz_ref; /* target z velocity [m/s] */
    bool has_q_ref;
    tvr_Quaternion q_ref; /* target attitude (optional) */
} tvr_SetReference;

/* Physical / limit configuration */
typedef struct _tvr_SetConfig {
    float mass; /* vehicle mass [kg] */
    float T_min; /* min thrust [N] */
    float T_max; /* max thrust [N] */
    float theta_min; /* min gimbal angle [rad] */
    float theta_max; /* max gimbal angle [rad] */
} tvr_SetConfig;

typedef struct _tvr_FlightCommand {
    pb_size_t which_payload;
    union _tvr_FlightCommand_payload {
        tvr_StateCommand state_cmd;
        tvr_SetPidGains set_pid_gains;
        tvr_SetReference set_reference;
        tvr_SetConfig set_config;
    } payload;
} tvr_FlightCommand;


#ifdef __cplusplus
extern "C" {
#endif

/* Helper constants for enums */
#define _tvr_StateCommand_Type_MIN tvr_StateCommand_Type_CMD_NONE
#define _tvr_StateCommand_Type_MAX tvr_StateCommand_Type_CMD_LAND
#define _tvr_StateCommand_Type_ARRAYSIZE ((tvr_StateCommand_Type)(tvr_StateCommand_Type_CMD_LAND+1))


#define tvr_StateCommand_type_ENUMTYPE tvr_StateCommand_Type





/* Initializer values for message structs */
#define tvr_FlightCommand_init_default           {0, {tvr_StateCommand_init_default}}
#define tvr_StateCommand_init_default            {_tvr_StateCommand_Type_MIN}
#define tvr_SetPidGains_init_default             {false, tvr_Vec3_init_default, false, tvr_Vec3_init_default, 0, 0, 0, 0}
#define tvr_SetReference_init_default            {0, 0, false, tvr_Quaternion_init_default}
#define tvr_SetConfig_init_default               {0, 0, 0, 0, 0}
#define tvr_FlightCommand_init_zero              {0, {tvr_StateCommand_init_zero}}
#define tvr_StateCommand_init_zero               {_tvr_StateCommand_Type_MIN}
#define tvr_SetPidGains_init_zero                {false, tvr_Vec3_init_zero, false, tvr_Vec3_init_zero, 0, 0, 0, 0}
#define tvr_SetReference_init_zero               {0, 0, false, tvr_Quaternion_init_zero}
#define tvr_SetConfig_init_zero                  {0, 0, 0, 0, 0}

/* Field tags (for use in manual encoding/decoding) */
#define tvr_StateCommand_type_tag                1
#define tvr_SetPidGains_attitude_kp_tag          1
#define tvr_SetPidGains_attitude_kd_tag          2
#define tvr_SetPidGains_z_kp_tag                 3
#define tvr_SetPidGains_z_ki_tag                 4
#define tvr_SetPidGains_z_kd_tag                 5
#define tvr_SetPidGains_z_integral_limit_tag     6
#define tvr_SetReference_z_ref_tag               1
#define tvr_SetReference_vz_ref_tag              2
#define tvr_SetReference_q_ref_tag               3
#define tvr_SetConfig_mass_tag                   1
#define tvr_SetConfig_T_min_tag                  2
#define tvr_SetConfig_T_max_tag                  3
#define tvr_SetConfig_theta_min_tag              4
#define tvr_SetConfig_theta_max_tag              5
#define tvr_FlightCommand_state_cmd_tag          1
#define tvr_FlightCommand_set_pid_gains_tag      2
#define tvr_FlightCommand_set_reference_tag      3
#define tvr_FlightCommand_set_config_tag         4

/* Struct field encoding specification for nanopb */
#define tvr_FlightCommand_FIELDLIST(X, a) \
X(a, STATIC,   ONEOF,    MESSAGE,  (payload,state_cmd,payload.state_cmd),   1) \
X(a, STATIC,   ONEOF,    MESSAGE,  (payload,set_pid_gains,payload.set_pid_gains),   2) \
X(a, STATIC,   ONEOF,    MESSAGE,  (payload,set_reference,payload.set_reference),   3) \
X(a, STATIC,   ONEOF,    MESSAGE,  (payload,set_config,payload.set_config),   4)
#define tvr_FlightCommand_CALLBACK NULL
#define tvr_FlightCommand_DEFAULT NULL
#define tvr_FlightCommand_payload_state_cmd_MSGTYPE tvr_StateCommand
#define tvr_FlightCommand_payload_set_pid_gains_MSGTYPE tvr_SetPidGains
#define tvr_FlightCommand_payload_set_reference_MSGTYPE tvr_SetReference
#define tvr_FlightCommand_payload_set_config_MSGTYPE tvr_SetConfig

#define tvr_StateCommand_FIELDLIST(X, a) \
X(a, STATIC,   SINGULAR, UENUM,    type,              1)
#define tvr_StateCommand_CALLBACK NULL
#define tvr_StateCommand_DEFAULT NULL

#define tvr_SetPidGains_FIELDLIST(X, a) \
X(a, STATIC,   OPTIONAL, MESSAGE,  attitude_kp,       1) \
X(a, STATIC,   OPTIONAL, MESSAGE,  attitude_kd,       2) \
X(a, STATIC,   SINGULAR, FLOAT,    z_kp,              3) \
X(a, STATIC,   SINGULAR, FLOAT,    z_ki,              4) \
X(a, STATIC,   SINGULAR, FLOAT,    z_kd,              5) \
X(a, STATIC,   SINGULAR, FLOAT,    z_integral_limit,   6)
#define tvr_SetPidGains_CALLBACK NULL
#define tvr_SetPidGains_DEFAULT NULL
#define tvr_SetPidGains_attitude_kp_MSGTYPE tvr_Vec3
#define tvr_SetPidGains_attitude_kd_MSGTYPE tvr_Vec3

#define tvr_SetReference_FIELDLIST(X, a) \
X(a, STATIC,   SINGULAR, FLOAT,    z_ref,             1) \
X(a, STATIC,   SINGULAR, FLOAT,    vz_ref,            2) \
X(a, STATIC,   OPTIONAL, MESSAGE,  q_ref,             3)
#define tvr_SetReference_CALLBACK NULL
#define tvr_SetReference_DEFAULT NULL
#define tvr_SetReference_q_ref_MSGTYPE tvr_Quaternion

#define tvr_SetConfig_FIELDLIST(X, a) \
X(a, STATIC,   SINGULAR, FLOAT,    mass,              1) \
X(a, STATIC,   SINGULAR, FLOAT,    T_min,             2) \
X(a, STATIC,   SINGULAR, FLOAT,    T_max,             3) \
X(a, STATIC,   SINGULAR, FLOAT,    theta_min,         4) \
X(a, STATIC,   SINGULAR, FLOAT,    theta_max,         5)
#define tvr_SetConfig_CALLBACK NULL
#define tvr_SetConfig_DEFAULT NULL

extern const pb_msgdesc_t tvr_FlightCommand_msg;
extern const pb_msgdesc_t tvr_StateCommand_msg;
extern const pb_msgdesc_t tvr_SetPidGains_msg;
extern const pb_msgdesc_t tvr_SetReference_msg;
extern const pb_msgdesc_t tvr_SetConfig_msg;

/* Defines for backwards compatibility with code written before nanopb-0.4.0 */
#define tvr_FlightCommand_fields &tvr_FlightCommand_msg
#define tvr_StateCommand_fields &tvr_StateCommand_msg
#define tvr_SetPidGains_fields &tvr_SetPidGains_msg
#define tvr_SetReference_fields &tvr_SetReference_msg
#define tvr_SetConfig_fields &tvr_SetConfig_msg

/* Maximum encoded size of messages (where known) */
#define TVR_COMMAND_PB_H_MAX_SIZE                tvr_FlightCommand_size
#define tvr_FlightCommand_size                   56
#define tvr_SetConfig_size                       25
#define tvr_SetPidGains_size                     54
#define tvr_SetReference_size                    32
#define tvr_StateCommand_size                    2

#ifdef __cplusplus
} /* extern "C" */
#endif

#endif
